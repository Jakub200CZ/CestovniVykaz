import Foundation
import Combine

// MARK: - Localization System
enum Language: String, CaseIterable {
    case czech = "cs"
    case english = "en"
    case german = "de"
    
    var displayName: String {
        switch self {
        case .czech: return "ƒåe≈°tina"
        case .english: return "English"
        case .german: return "Deutsch"
        }
    }
    
    var flag: String {
        switch self {
        case .czech: return "üá®üáø"
        case .english: return "üá¨üáß"
        case .german: return "üá©üá™"
        }
    }
}

class LocalizationManager: ObservableObject {
    @Published var currentLanguage: Language = .czech
    
    static let shared = LocalizationManager()
    private let languageKey = "selectedLanguage"
    
    private init() {
        loadSavedLanguage()
    }
    
    func localizedString(_ key: String) -> String {
        return LocalizationData.shared.getString(for: key, language: currentLanguage)
    }
    
    func setLanguage(_ language: Language) {
        currentLanguage = language
        saveLanguage()
    }
    
    private func loadSavedLanguage() {
        if let savedLanguageString = UserDefaults.standard.string(forKey: languageKey),
           let savedLanguage = Language(rawValue: savedLanguageString) {
            currentLanguage = savedLanguage
        }
    }
    
    private func saveLanguage() {
        UserDefaults.standard.set(currentLanguage.rawValue, forKey: languageKey)
    }
}

// MARK: - Localization Data
class LocalizationData {
    static let shared = LocalizationData()
    
    private var czechStrings: [String: String] = [:]
    private var englishStrings: [String: String] = [:]
    private var germanStrings: [String: String] = [:]
    
    private init() {
        loadLocalizationData()
    }
    
    private func loadLocalizationData() {
        // Czech strings
        czechStrings = [
            // Navigation
            "home": "V√≠tej",
            "overview": "P≈ôehled",
            "history": "Historie",
            "statistics": "Statistiky",
            "records": "Z√°znamy",
            "customers": "Z√°kazn√≠ci",
            "fuel": "Tankov√°n√≠",
            "settings": "Nastaven√≠",
            
            // App Title and Subtitle
            "appTitle": "Cestovn√≠ V√Ωkaz",
            "appSubtitle": "Pro mechaniky",
            "appDescription": "Digitalizace pro mechanika",
            
            // Loading Screen
            "loadingApp": "Naƒç√≠t√°n√≠ aplikace...",
            "createdBy": "Vytvo≈ôil Jakub Sedl√°ƒçek",
            
            // Page Titles
            "recordsTitle": "Z√°znam v√Ωkaz≈Ø",
            "fuelTitle": "P≈ôehled tankov√°n√≠",
            "historyTitle": "Historie v√Ωkaz≈Ø",
            
            // Customer Screen
            "addNewCustomer": "P≈ôidat nov√©ho z√°kazn√≠ka",
            "tryDifferentSearch": "Zkuste jin√© vyhled√°vac√≠ slovo",
            "saveChanges": "Ulo≈æit zmƒõny",
            "customerUpdated": "Z√°kazn√≠k byl √∫spƒõ≈°nƒõ upraven",
            
            // History Screen
            "monthCalendar": "Kalend√°≈ô mƒõs√≠ce",
            "legend": "Legenda",
            "vacation": "Dovolen√°",
            "sickMedical": "L√©ka≈ô/Nemoc",
            "workingDay": "Pracovn√≠ den",
            "save": "Ulo≈æit",
            
            // Alerts
            "confirmDeleteFuel": "Opravdu chcete smazat tankov√°n√≠ z {date}? Tato akce je nevratn√°.",
            "confirmDeleteCustomer": "Opravdu chcete smazat z√°kazn√≠ka '{name}'? Tato akce je nevratn√°.",
            
            // Common
            "dash": "‚Äî",
            "version": "1.0.0",
            
            // Day declension (Czech)
            "day1": "1 den",
            "day2to4": "{count} dny",
            "day5plus": "{count} dn≈Ø",
            
            // Form Fields
            "date": "Datum",
            "enterCity": "Zadejte mƒõsto",
            "notes": "Pozn√°mka",
            "enterNotes": "Zadejte pozn√°mku...",
            
            // Statistics Labels
            "driving": "J√≠zda",
            "work": "Pr√°ce",
            "days": "Dny",
            "daysCount": "Dn≈Ø",
            
            // Quick Actions
            "addRecordForDay": "P≈ôidat v√Ωkaz za den",
            "viewPreviousMonths": "Zobrazit p≈ôedchoz√≠ mƒõs√≠ce",
            "fuelTracking": "Sledov√°n√≠ paliva",
            "hoursKilometersOverview": "P≈ôehled hodin a kilometr≈Ø",
            
            // Calendar
            "workingDays": "Pracovn√≠ dny",
            "delete": "Smazat",
            "searchCustomers": "Hledat z√°kazn√≠ky...",
            
            // Weekday abbreviations
            "mon": "Po",
            "tue": "√öt",
            "wed": "St",
            "thu": "ƒåt",
            "fri": "P√°",
            "sat": "So",
            "sun": "Ne",
            
            // Home Screen
            "currentMonth": "Aktu√°ln√≠ mƒõs√≠c",
            "drivingHours": "Hodiny j√≠zdy",
            "workingHours": "Hodiny pr√°ce",
            "totalHours": "Celkem hodin",
            "kilometers": "Kilometry",
            "recordsCount": "z√°znam≈Ø",
            "fuelCosts": "N√°klady na palivo",
            "quickActions": "Rychl√© akce",
            "viewStatistics": "Zobrazit statistiky",
            "addRecord": "P≈ôidat z√°znam",
            "addCustomer": "P≈ôidat z√°kazn√≠ka",
            "addFuel": "P≈ôidat tankov√°n√≠",
            
            // Records Screen
            "drivingTime": "Doba j√≠zdy",
            "workingTime": "Doba pr√°ce",
            "kilometersDriven": "Ujet√© kilometry",
            "city": "Mƒõsto",
            "dayType": "Typ dne",
            "saveRecord": "Ulo≈æit v√Ωkaz",
            "updateRecord": "Aktualizovat v√Ωkaz",
            "recordSaved": "V√Ωkaz byl √∫spƒõ≈°nƒõ ulo≈æen",
            "recordUpdated": "V√Ωkaz byl √∫spƒõ≈°nƒõ aktualizov√°n",
            "validationError": "Chyba validace",
            "fillRequiredFields": "Vypl≈àte v≈°echna povinn√° pole",
            "existingRecord": "Z√°znam pro tento den ji≈æ existuje",
            "recordLoaded": "Data jsou naƒçtena a uzamƒçena pro zobrazen√≠",
            "weekendHoliday": "V√≠kend/Sv√°tek",
            "alreadyHasRecord": "Ji≈æ m√°te z√°znam pro tento den",
            "editRecord": "Upravit z√°znam",
            "deleteRecord": "Smazat z√°znam",
            "customer": "Z√°kazn√≠k",
            
            // Day Types
            "workDay": "Pr√°ce",
            "sickDay": "L√©ka≈ô/Nemoc",
            "noRecords": "≈Ω√°dn√© z√°znamy",
            "monthOverview": "P≈ôehled mƒõs√≠ce",
            "totalDrivingHours": "Celkem hodin j√≠zdy",
            "totalWorkingHours": "Celkem hodin pr√°ce",
            "totalKilometers": "Celkem kilometr≈Ø",
            "recordsCountShort": "Poƒçet z√°znam≈Ø",
            "vacationDays": "Dovolen√°",
            "sickDays": "L√©ka≈ô/Nemoc",
            "workingDaysSection": "Pracovn√≠ dny",
            "noRecordsForMonth": "≈Ω√°dn√© z√°znamy pro tento mƒõs√≠c",
            "monthNotFound": "Mƒõs√≠c nebyl nalezen",
            "close": "Zav≈ô√≠t",
            "edit": "Upravit",
            
            // Statistics Screen
            "statisticsTitle": "Statistiky",
            "periodStats": "Statistika za",
            "totalHoursLabel": "Celkem hodin",
            "totalKilometersLabel": "Celkem km",
            "timeRange": "ƒåasov√© obdob√≠",
            "currentMonthStats": "Aktu√°ln√≠ mƒõs√≠c",
            "lastMonth": "Minul√Ω mƒõs√≠c",
            "last3Months": "Posledn√≠ 3 mƒõs√≠ce",
            "allTime": "Celkovƒõ",
            "monthlyOverview": "Mƒõs√≠ƒçn√≠ p≈ôehled",
            "noDataForPeriod": "≈Ω√°dn√© data pro vybran√© obdob√≠",
            "monthlyFuelCosts": "Mƒõs√≠ƒçn√≠ n√°klady na palivo",
            "averageFuelCost": "Pr≈Ømƒõrn√© n√°klady na palivo",
            
            // Customers Screen
            "customersTitle": "Z√°kazn√≠ci",
            "addCustomerTitle": "Nov√Ω z√°kazn√≠k",
            "customerName": "Jm√©no z√°kazn√≠ka",
            "customerCity": "Mƒõsto",
            "customerKilometers": "Kilometry",
            "customerDrivingTime": "ƒåas j√≠zdy",
            "addCustomerButton": "P≈ôidat z√°kazn√≠ka",
            "customerAdded": "Z√°kazn√≠k byl √∫spƒõ≈°nƒõ p≈ôid√°n",
            "noCustomers": "≈Ω√°dn√≠ z√°kazn√≠ci",
            "startAddingCustomers": "Zaƒçnƒõte p≈ôid√°v√°n√≠m prvn√≠ho z√°kazn√≠ka",
            
            // Fuel Screen
            "lastFuelEntries": "Posledn√≠ tankov√°n√≠",
            "newFuelEntry": "Nov√© tankov√°n√≠",
            "fuelCalendar": "Kalend√°≈ô tankov√°n√≠",
            "noFuelEntries": "≈Ω√°dn√© tankov√°n√≠",
            "startAddingFuel": "Zaƒçnƒõte p≈ôid√°v√°n√≠m prvn√≠ho tankov√°n√≠",
            "fuelDate": "Datum",
            "fuelType": "Druh paliva",
            "fuelAmount": "Mno≈æstv√≠",
            "fuelPrice": "Cena za litr",
            "fuelLocation": "M√≠sto tankov√°n√≠",
            "fuelNotes": "Pozn√°mka",
            "fuelPricePerLiter": "Cena za litr",
            "totalPrice": "Celkov√° cena",
            "liters": "Litr",
            "currency": "Kƒç",
            "pricePerLiterUnit": "Kƒç/L",
            "saveFuelEntry": "Ulo≈æit tankov√°n√≠",
            "fuelEntrySaved": "Tankov√°n√≠ bylo √∫spƒõ≈°nƒõ ulo≈æeno",
            "diesel": "Diesel",
            "gasoline": "Benz√≠n",
            "currentDateTime": "Aktu√°ln√≠ datum a ƒças jsou p≈ôedvyplnƒõny",
            "currentDateTimePrefilled": "Aktu√°ln√≠ datum a ƒças jsou p≈ôedvyplnƒõny",
            "calculatedTotalPrice": "Vypoƒçten√° celkov√° cena",
            "calculatedPricePerLiter": "Vypoƒçten√° cena za litr",
            "fuelStation": "ƒåerpac√≠ stanice",
            "fuelStationSuggestions": "N√°povƒõda ƒçerpac√≠ch stanic",
            
            // Settings Screen
            "settingsTitle": "Nastaven√≠",
            "notifications": "Notifikace",
            "dailyReminder": "Denn√≠ p≈ôipom√≠nka",
            "notificationDescription": "Notifikace ve 20:00 pokud nen√≠ vyplnƒõn v√Ωkaz",
            "enableNotifications": "Povolit notifikace",
            "notificationsEnabled": "Notifikace jsou povoleny",
            "testNotification": "Test notifikace (15s)",
            "testNotificationTime": "Test notifikace (15s)",
            "appInfo": "Informace o aplikaci",
            "language": "Jazyk",
            "selectLanguage": "Vyberte jazyk",
            "done": "Hotovo",
            
            // Alerts
            "success": "√öspƒõch",
            "error": "Chyba",
            "cancel": "Zru≈°it",
            "ok": "OK",
            "confirm": "Potvrdit",
            "clear": "Vymazat",
            "generate": "Vygenerovat",
            
            // Months
            "january": "Leden",
            "february": "√önor",
            "march": "B≈ôezen",
            "april": "Duben",
            "may": "Kvƒõten",
            "june": "ƒåerven",
            "july": "ƒåervenec",
            "august": "Srpen",
            "september": "Z√°≈ô√≠",
            "october": "≈ò√≠jen",
            "november": "Listopad",
            "december": "Prosinec",
            
            // Weekdays
            "monday": "Pondƒõl√≠",
            "tuesday": "√öter√Ω",
            "wednesday": "St≈ôeda",
            "thursday": "ƒåtvrtek",
            "friday": "P√°tek",
            "saturday": "Sobota",
            "sunday": "Nedƒõle",
            
            // Common
            "working": "Pr√°ce",
            "sick": "Nemoc",
            "day": "den",
            "hours": "hodin",
            "hour": "hodina",
            "km": "km",
            "litersUnit": "L",
            "currencyUnit": "Kƒç",
            
            // Additional UI translations
            "newRecord": "Nov√Ω Z√°znam",
            "timeData": "ƒåasov√© √∫daje",
            "kilometersAndLocation": "Kilometry a m√≠sto",
            "note": "Pozn√°mka",
            "dateAndTime": "Datum a ƒças",
            "amountAndPrice": "Mno≈æstv√≠ a cena",
            "enterStation": "Zadejte stanici",
            "enterNote": "Zadejte pozn√°mku",
            "newCustomer": "Nov√Ω Z√°kazn√≠k",
            "customerInfo": "Informace o z√°kazn√≠kovi",
            "back": "Zpƒõt",
            
            // Time Input Settings
            "timeInputSettings": "Zad√°v√°n√≠ ƒçasu",
            "useTimePicker": "Pou≈æ√≠t ƒçasov√Ω v√Ωbƒõr",
            "timePickerDescription": "ƒåas se zad√°v√° pomoc√≠ hodin a minut",
            "textInputDescription": "ƒåas se zad√°v√° jako desetinn√© ƒç√≠slo (nap≈ô. 6,5)",
            "textMode": "Textov√Ω re≈æim",
            "timePickerMode": "ƒåasov√Ω v√Ωbƒõr",
            "textModeDescription": "6,5 = 6 hodin 30 minut",
            "timePickerDescription2": "P≈ôesn√© nastaven√≠ hodin a minut"
        ]
        
        // English strings
        englishStrings = [
            // Navigation
            "home": "Welcome",
            "overview": "Overview",
            "history": "History",
            "statistics": "Statistics",
            "records": "Records",
            "customers": "Customers",
            "fuel": "Fuel",
            "settings": "Settings",
            
            // App Title and Subtitle
            "appTitle": "Travel Report",
            "appSubtitle": "For Mechanics",
            "appDescription": "Digitalization for Mechanics",
            
            // Loading Screen
            "loadingApp": "Loading application...",
            "createdBy": "Created by Jakub Sedl√°ƒçek",
            
            // Page Titles
            "recordsTitle": "Record Reports",
            "fuelTitle": "Fuel Overview",
            "historyTitle": "Report History",
            
            // Customer Screen
            "addNewCustomer": "Add New Customer",
            "tryDifferentSearch": "Try different search term",
            "saveChanges": "Save Changes",
            "customerUpdated": "Customer updated successfully",
            
            // History Screen
            "monthCalendar": "Month Calendar",
            "legend": "Legend",
            "vacation": "Vacation",
            "sickMedical": "Sick/Medical",
            "workingDay": "Working Day",
            "save": "Save",
            
            // Alerts
            "confirmDeleteFuel": "Do you really want to delete fuel entry from {date}? This action is irreversible.",
            "confirmDeleteCustomer": "Do you really want to delete customer '{name}'? This action is irreversible.",
            
            // Common
            "dash": "‚Äî",
            "version": "1.0.0",
            
            // Day declension (English)
            "day1": "1 day",
            "day2to4": "{count} days",
            "day5plus": "{count} days",
            
            // Form Fields
            "date": "Date",
            "enterCity": "Enter city",
            "notes": "Notes",
            "enterNotes": "Enter notes...",
            
            // Statistics Labels
            "driving": "Driving",
            "work": "Work",
            "days": "Days",
            "daysCount": "Days",
            
            // Quick Actions
            "addRecordForDay": "Add report for day",
            "viewPreviousMonths": "View previous months",
            "fuelTracking": "Fuel tracking",
            "hoursKilometersOverview": "Hours and kilometers overview",
            
            // Calendar
            "workingDays": "Working Days",
            "delete": "Delete",
            "searchCustomers": "Search customers...",
            
            // Weekday abbreviations
            "mon": "Mon",
            "tue": "Tue",
            "wed": "Wed",
            "thu": "Thu",
            "fri": "Fri",
            "sat": "Sat",
            "sun": "Sun",
            
            // Home Screen
            "currentMonth": "Current Month",
            "drivingHours": "Driving Hours",
            "workingHours": "Working Hours",
            "totalHours": "Total Hours",
            "kilometers": "Kilometers",
            "recordsCount": "records",
            "fuelCosts": "Fuel Costs",
            "quickActions": "Quick Actions",
            "viewStatistics": "View Statistics",
            "addRecord": "Add Record",
            "addCustomer": "Add Customer",
            "addFuel": "Add Fuel",
            
            // Records Screen
            "drivingTime": "Driving Time",
            "workingTime": "Working Time",
            "kilometersDriven": "Kilometers Driven",
            "city": "City",
            "dayType": "Day Type",
            "saveRecord": "Save Record",
            "updateRecord": "Update Record",
            "recordSaved": "Record saved successfully",
            "recordUpdated": "Record updated successfully",
            "validationError": "Validation Error",
            "fillRequiredFields": "Please fill in all required fields",
            "existingRecord": "Record for this day already exists",
            "recordLoaded": "Data is loaded and locked for display",
            "weekendHoliday": "Weekend/Holiday",
            "alreadyHasRecord": "You already have a record for this day",
            "editRecord": "Edit Record",
            "deleteRecord": "Delete Record",
            "customer": "Customer",
            
            // Day Types
            "workDay": "Work",
            "sickDay": "Sick/Medical",
            "noRecords": "No Records",
            "monthOverview": "Month Overview",
            "totalDrivingHours": "Total Driving Hours",
            "totalWorkingHours": "Total Working Hours",
            "totalKilometers": "Total Kilometers",
            "recordsCountShort": "Number of Records",
            "vacationDays": "Vacation",
            "sickDays": "Sick/Medical",
            "workingDaysSection": "Working Days",
            "noRecordsForMonth": "No records for this month",
            "monthNotFound": "Month not found",
            "close": "Close",
            "edit": "Edit",
            
            // Statistics Screen
            "statisticsTitle": "Statistics",
            "periodStats": "Statistics for",
            "totalHoursLabel": "Total Hours",
            "totalKilometersLabel": "Total km",
            "timeRange": "Time Period",
            "currentMonthStats": "Current Month",
            "lastMonth": "Last Month",
            "last3Months": "Last 3 Months",
            "allTime": "All Time",
            "monthlyOverview": "Monthly Overview",
            "noDataForPeriod": "No data for selected period",
            "monthlyFuelCosts": "Monthly Fuel Costs",
            "averageFuelCost": "Average Fuel Cost",
            
            // Customers Screen
            "customersTitle": "Customers",
            "addCustomerTitle": "New Customer",
            "customerName": "Customer Name",
            "customerCity": "City",
            "customerKilometers": "Kilometers",
            "customerDrivingTime": "Driving Time",
            "addCustomerButton": "Add Customer",
            "customerAdded": "Customer added successfully",
            "noCustomers": "No customers",
            "startAddingCustomers": "Start by adding your first customer",
            
            // Fuel Screen
            "lastFuelEntries": "Last Fuel Entries",
            "newFuelEntry": "New Fuel Entry",
            "fuelCalendar": "Fuel Calendar",
            "noFuelEntries": "No fuel entries",
            "startAddingFuel": "Start by adding your first fuel entry",
            "fuelDate": "Date",
            "fuelType": "Fuel Type",
            "fuelAmount": "Amount",
            "fuelPrice": "Price per Liter",
            "fuelLocation": "Location",
            "fuelNotes": "Notes",
            "fuelPricePerLiter": "Price per Liter",
            "totalPrice": "Total Price",
            "liters": "Liter",
            "currency": "CZK",
            "pricePerLiterUnit": "CZK/L",
            "saveFuelEntry": "Save Fuel Entry",
            "fuelEntrySaved": "Fuel entry saved successfully",
            "diesel": "Diesel",
            "gasoline": "Gasoline",
            "currentDateTime": "Current date and time are pre-filled",
            "currentDateTimePrefilled": "Current date and time are pre-filled",
            "calculatedTotalPrice": "Calculated total price",
            "calculatedPricePerLiter": "Calculated price per liter",
            "fuelStation": "Gas Station",
            "fuelStationSuggestions": "Gas Station Suggestions",
            
            // Settings Screen
            "settingsTitle": "Settings",
            "notifications": "Notifications",
            "dailyReminder": "Daily Reminder",
            "notificationDescription": "Notification at 8:00 PM if report is not filled",
            "enableNotifications": "Enable Notifications",
            "notificationsEnabled": "Notifications are enabled",
            "testNotification": "Test Notification (15s)",
            "testNotificationTime": "Test Notification (15s)",
            "appInfo": "App Information",
            "language": "Language",
            "selectLanguage": "Select Language",
            "done": "Done",
            
            // Alerts
            "success": "Success",
            "error": "Error",
            "cancel": "Cancel",
            "ok": "OK",
            "confirm": "Confirm",
            "clear": "Clear",
            "generate": "Generate",
            
            // Months
            "january": "January",
            "february": "February",
            "march": "March",
            "april": "April",
            "may": "May",
            "june": "June",
            "july": "July",
            "august": "August",
            "september": "September",
            "october": "October",
            "november": "November",
            "december": "December",
            
            // Weekdays
            "monday": "Monday",
            "tuesday": "Tuesday",
            "wednesday": "Wednesday",
            "thursday": "Thursday",
            "friday": "Friday",
            "saturday": "Saturday",
            "sunday": "Sunday",
            
            // Common
            "working": "Work",
            "sick": "Sick",
            "day": "day",
            "hours": "hours",
            "hour": "hour",
            "km": "km",
            "litersUnit": "L",
            "currencyUnit": "CZK",
            
            // Additional UI translations
            "newRecord": "New Record",
            "timeData": "Time Data",
            "kilometersAndLocation": "Kilometers and Location",
            "note": "Note",
            "dateAndTime": "Date and Time",
            "amountAndPrice": "Amount and Price",
            "enterStation": "Enter Station",
            "enterNote": "Enter Note",
            "newCustomer": "New Customer",
            "customerInfo": "Customer Information",
            "back": "Back",
            
            // Time Input Settings
            "timeInputSettings": "Time Input",
            "useTimePicker": "Use Time Picker",
            "timePickerDescription": "Time is entered using hours and minutes",
            "textInputDescription": "Time is entered as decimal number (e.g. 6.5)",
            "textMode": "Text Mode",
            "timePickerMode": "Time Picker",
            "textModeDescription": "6.5 = 6 hours 30 minutes",
            "timePickerDescription2": "Precise hours and minutes setting"
        ]
        
        // German strings
        germanStrings = [
            // Navigation
            "home": "Willkommen",
            "overview": "√úbersicht",
            "history": "Verlauf",
            "statistics": "Statistiken",
            "records": "Aufzeichnungen",
            "customers": "Kunden",
            "fuel": "Tankstellen",
            "settings": "Einstellungen",
            
            // App Title and Subtitle
            "appTitle": "Reisebericht",
            "appSubtitle": "F√ºr Mechaniker",
            "appDescription": "Digitalisierung f√ºr Mechaniker",
            
            // Loading Screen
            "loadingApp": "Anwendung wird geladen...",
            "createdBy": "Erstellt von Jakub Sedl√°ƒçek",
            
            // Page Titles
            "recordsTitle": "Berichtsaufzeichnungen",
            "fuelTitle": "Kraftstoff√ºbersicht",
            "historyTitle": "Berichtsverlauf",
            
            // Customer Screen
            "addNewCustomer": "Neuen Kunden hinzuf√ºgen",
            "tryDifferentSearch": "Versuchen Sie einen anderen Suchbegriff",
            "saveChanges": "√Ñnderungen speichern",
            "customerUpdated": "Kunde erfolgreich aktualisiert",
            
            // History Screen
            "monthCalendar": "Monatskalender",
            "legend": "Legende",
            "vacation": "Urlaub",
            "sickMedical": "Krank/Arzt",
            "workingDay": "Arbeitstag",
            "save": "Speichern",
            
            // Alerts
            "confirmDeleteFuel": "M√∂chten Sie den Tankvorgang vom {date} wirklich l√∂schen? Diese Aktion ist unumkehrbar.",
            "confirmDeleteCustomer": "M√∂chten Sie den Kunden '{name}' wirklich l√∂schen? Diese Aktion ist unumkehrbar.",
            
            // Common
            "dash": "‚Äî",
            "version": "1.0.0",
            
            // Day declension (German)
            "day1": "1 Tag",
            "day2to4": "{count} Tage",
            "day5plus": "{count} Tage",
            
            // Form Fields
            "date": "Datum",
            "enterCity": "Stadt eingeben",
            "notes": "Notizen",
            "enterNotes": "Notizen eingeben...",
            
            // Statistics Labels
            "driving": "Fahren",
            "work": "Arbeit",
            "days": "Tage",
            "daysCount": "Tage",
            
            // Quick Actions
            "addRecordForDay": "Bericht f√ºr Tag hinzuf√ºgen",
            "viewPreviousMonths": "Vorherige Monate anzeigen",
            "fuelTracking": "Kraftstoffverfolgung",
            "hoursKilometersOverview": "Stunden und Kilometer √úbersicht",
            
            // Calendar
            "workingDays": "Arbeitstage",
            "delete": "L√∂schen",
            "searchCustomers": "Kunden suchen...",
            
            // Weekday abbreviations
            "mon": "Mo",
            "tue": "Di",
            "wed": "Mi",
            "thu": "Do",
            "fri": "Fr",
            "sat": "Sa",
            "sun": "So",
            
            // Home Screen
            "currentMonth": "Aktueller Monat",
            "drivingHours": "Fahrstunden",
            "workingHours": "Arbeitsstunden",
            "totalHours": "Gesamtstunden",
            "kilometers": "Kilometer",
            "recordsCount": "Aufzeichnungen",
            "fuelCosts": "Kraftstoffkosten",
            "quickActions": "Schnellaktionen",
            "viewStatistics": "Statistiken anzeigen",
            "addRecord": "Aufzeichnung hinzuf√ºgen",
            "addCustomer": "Kunde hinzuf√ºgen",
            "addFuel": "Tankvorgang hinzuf√ºgen",
            
            // Records Screen
            "drivingTime": "Fahrzeit",
            "workingTime": "Arbeitszeit",
            "kilometersDriven": "Gefahrene Kilometer",
            "city": "Stadt",
            "dayType": "Tagestyp",
            "saveRecord": "Aufzeichnung speichern",
            "updateRecord": "Aufzeichnung aktualisieren",
            "recordSaved": "Aufzeichnung erfolgreich gespeichert",
            "recordUpdated": "Aufzeichnung erfolgreich aktualisiert",
            "validationError": "Validierungsfehler",
            "fillRequiredFields": "Bitte f√ºllen Sie alle Pflichtfelder aus",
            "existingRecord": "Aufzeichnung f√ºr diesen Tag existiert bereits",
            "recordLoaded": "Daten sind geladen und f√ºr die Anzeige gesperrt",
            "weekendHoliday": "Wochenende/Feiertag",
            "alreadyHasRecord": "Sie haben bereits eine Aufzeichnung f√ºr diesen Tag",
            "editRecord": "Aufzeichnung bearbeiten",
            "deleteRecord": "Aufzeichnung l√∂schen",
            "customer": "Kunde",
            
            // Day Types
            "workDay": "Arbeit",
            "sickDay": "Krank/Arzt",
            "noRecords": "Keine Aufzeichnungen",
            "monthOverview": "Monats√ºbersicht",
            "totalDrivingHours": "Gesamte Fahrstunden",
            "totalWorkingHours": "Gesamte Arbeitsstunden",
            "totalKilometers": "Gesamte Kilometer",
            "recordsCountShort": "Anzahl der Aufzeichnungen",
            "vacationDays": "Urlaub",
            "sickDays": "Krank/Arzt",
            "workingDaysSection": "Arbeitstage",
            "noRecordsForMonth": "Keine Aufzeichnungen f√ºr diesen Monat",
            "monthNotFound": "Monat nicht gefunden",
            "close": "Schlie√üen",
            "edit": "Bearbeiten",
            
            // Statistics Screen
            "statisticsTitle": "Statistiken",
            "periodStats": "Statistiken f√ºr",
            "totalHoursLabel": "Gesamtstunden",
            "totalKilometersLabel": "Gesamt km",
            "timeRange": "Zeitraum",
            "currentMonthStats": "Aktueller Monat",
            "lastMonth": "Letzter Monat",
            "last3Months": "Letzte 3 Monate",
            "allTime": "Gesamt",
            "monthlyOverview": "Monatliche √úbersicht",
            "noDataForPeriod": "Keine Daten f√ºr den ausgew√§hlten Zeitraum",
            "monthlyFuelCosts": "Monatliche Kraftstoffkosten",
            "averageFuelCost": "Durchschnittliche Kraftstoffkosten",
            
            // Customers Screen
            "customersTitle": "Kunden",
            "addCustomerTitle": "Neuer Kunde",
            "customerName": "Kundenname",
            "customerCity": "Stadt",
            "customerKilometers": "Kilometer",
            "customerDrivingTime": "Fahrzeit",
            "addCustomerButton": "Kunde hinzuf√ºgen",
            "customerAdded": "Kunde erfolgreich hinzugef√ºgt",
            "noCustomers": "Keine Kunden",
            "startAddingCustomers": "Beginnen Sie mit dem Hinzuf√ºgen Ihres ersten Kunden",
            
            // Fuel Screen
            "lastFuelEntries": "Letzte Tankvorg√§nge",
            "newFuelEntry": "Neuer Tankvorgang",
            "fuelCalendar": "Tankkalender",
            "noFuelEntries": "Keine Tankvorg√§nge",
            "startAddingFuel": "Beginnen Sie mit dem Hinzuf√ºgen Ihres ersten Tankvorgangs",
            "fuelDate": "Datum",
            "fuelType": "Kraftstoffart",
            "fuelAmount": "Menge",
            "fuelPrice": "Preis pro Liter",
            "fuelLocation": "Standort",
            "fuelNotes": "Notizen",
            "fuelPricePerLiter": "Preis pro Liter",
            "totalPrice": "Gesamtpreis",
            "liters": "Liter",
            "currency": "CZK",
            "pricePerLiterUnit": "CZK/L",
            "saveFuelEntry": "Tankvorgang speichern",
            "fuelEntrySaved": "Tankvorgang erfolgreich gespeichert",
            "diesel": "Diesel",
            "gasoline": "Benzin",
            "currentDateTime": "Aktuelles Datum und Uhrzeit sind vorausgef√ºllt",
            "currentDateTimePrefilled": "Aktuelles Datum und Uhrzeit sind vorausgef√ºllt",
            "calculatedTotalPrice": "Berechneter Gesamtpreis",
            "calculatedPricePerLiter": "Berechneter Preis pro Liter",
            "fuelStation": "Tankstelle",
            "fuelStationSuggestions": "Tankstellen-Vorschl√§ge",
            
            // Settings Screen
            "settingsTitle": "Einstellungen",
            "notifications": "Benachrichtigungen",
            "dailyReminder": "T√§gliche Erinnerung",
            "notificationDescription": "Benachrichtigung um 20:00 Uhr, wenn Bericht nicht ausgef√ºllt ist",
            "enableNotifications": "Benachrichtigungen aktivieren",
            "notificationsEnabled": "Benachrichtigungen sind aktiviert",
            "testNotification": "Test-Benachrichtigung (15s)",
            "testNotificationTime": "Test-Benachrichtigung (15s)",
            "appInfo": "App-Informationen",
            "language": "Sprache",
            "selectLanguage": "Sprache ausw√§hlen",
            "done": "Fertig",
            
            // Alerts
            "success": "Erfolg",
            "error": "Fehler",
            "cancel": "Abbrechen",
            "ok": "OK",
            "confirm": "Best√§tigen",
            "clear": "L√∂schen",
            "generate": "Generieren",
            
            // Months
            "january": "Januar",
            "february": "Februar",
            "march": "M√§rz",
            "april": "April",
            "may": "Mai",
            "june": "Juni",
            "july": "Juli",
            "august": "August",
            "september": "September",
            "october": "Oktober",
            "november": "November",
            "december": "Dezember",
            
            // Weekdays
            "monday": "Montag",
            "tuesday": "Dienstag",
            "wednesday": "Mittwoch",
            "thursday": "Donnerstag",
            "friday": "Freitag",
            "saturday": "Samstag",
            "sunday": "Sonntag",
            
            // Common
            "working": "Arbeit",
            "sick": "Krank",
            "day": "Tag",
            "hours": "Stunden",
            "hour": "Stunde",
            "km": "km",
            "litersUnit": "L",
            "currencyUnit": "CZK",
            
            // Additional UI translations
            "newRecord": "Neuer Eintrag",
            "timeData": "Zeitdaten",
            "kilometersAndLocation": "Kilometer und Ort",
            "note": "Notiz",
            "dateAndTime": "Datum und Zeit",
            "amountAndPrice": "Menge und Preis",
            "enterStation": "Station eingeben",
            "enterNote": "Notiz eingeben",
            "newCustomer": "Neuer Kunde",
            "customerInfo": "Kundeninformationen",
            "back": "Zur√ºck",
            
            // Time Input Settings
            "timeInputSettings": "Zeiteingabe",
            "useTimePicker": "Zeitauswahl verwenden",
            "timePickerDescription": "Zeit wird mit Stunden und Minuten eingegeben",
            "textInputDescription": "Zeit wird als Dezimalzahl eingegeben (z.B. 6,5)",
            "textMode": "Textmodus",
            "timePickerMode": "Zeitauswahl",
            "textModeDescription": "6,5 = 6 Stunden 30 Minuten",
            "timePickerDescription2": "Pr√§zise Stunden- und Minuten-Einstellung"
        ]
    }
    
    func getString(for key: String, language: Language) -> String {
        switch language {
        case .czech:
            return czechStrings[key] ?? key
        case .english:
            return englishStrings[key] ?? key
        case .german:
            return germanStrings[key] ?? key
        }
    }
}

// MARK: - Extensions for easier usage
extension String {
    var localized: String {
        return LocalizationManager.shared.localizedString(self)
    }
}

// MARK: - Date formatting extensions
extension Date {
    func localizedMonthYear(for language: Language) -> String {
        let formatter = DateFormatter()
        formatter.locale = Locale(identifier: language.rawValue)
        formatter.dateFormat = "MMMM yyyy"
        return formatter.string(from: self)
    }
    
    func localizedMonth(for language: Language) -> String {
        let formatter = DateFormatter()
        formatter.locale = Locale(identifier: language.rawValue)
        formatter.dateFormat = "MMMM"
        return formatter.string(from: self)
    }
}
